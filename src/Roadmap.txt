


sync: {
  view: 'abc123'
}










Does any note that I own point to this note? Then I have access!




Collab Frontend
===============

Access Rules

Note: Visible
Reference: Visible if reference target is visible
Item: Always visible
Parent: Visible if parent is visible



Collab Backend
==============

Models:
Group <id, people>
Person <id, token, vlllageToken>
Client <>
Note <>


A -> B (mai,bun) -> C -> D -> E (yum) -> F {mai,bun,yum}

A.group = null
B.group = mb94kg
C.group = null
D.group = null
E.group = yodk35
F.group = null

No deep searches for access group (Cached + updated locally)
No changes to other notes when moving or changing a parent
No changes to other notes when adding or removing groups to parent notes

Sync
====


Client -> Server

-> sync {me: '12345...128', timestamp: 'E-TAG'}
-> sync [{id: , field: }, {id: , field: }, ...]

Client <- Server

<- sync {me: '12345...128', timestamp: 'E-TAG', notes: [{note}, {note}, ...]}
<- sync [{id: , field: }, {id: , field: }, ...]





Vlllage Sync MVP (Zero-to-One)
==============================

Right click -> Connect to Village...

VlllageInceptionNotesToken is grabbed from Village Store

If no VlllageInceptionNotesToken is found, create and store token in Village Store

Store VlllageInceptionNotesToken in localStorage

Connect to wss://sync.inceptionnotes.com/ws

send state event with VlllageInceptionNotesToken

receive state event

--- Zero-to-One completed ---



Notes
=====

Server is there for the client (heavy client)

Debounce server-sync every 5s (i.e. not every character press)
If window closed while not saved, notify with system alert

Notes client-side are marked dirty as in not-sent
THESE NOTES are sent to the server on forst possibility

All merging happens client-side


Merge
=====

resolve: {
  [{id: }, {id: }]
}



Events (Push Notification \ Email)
====

Jacob shared a note with you[ and 3 others]
Jacob updated 12 notes
Jacob added Nate Ferrero to "Some Note"


















Server
======

sync.inceptionnotes.com

API
===

Catch Up

{
  all: {
    dirty: true,
    since: 'date'
  }
}



Edits

{
  'state': { 'id': '1231321312', background: '3232' }
}

{
  'state': { 'id': '1231321312', background: '3232' }
}

People

{
  'add': { 'id': '12121212', people: ['32232323'] }
}

{
  'remove': { 'id': '12121212', people: ['32232323'] }
}